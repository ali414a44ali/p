import asyncio
import re
import time
import requests
import aiohttp
import time
import asyncio
import calendar
from pyrogram import Client, filters
from pyrogram import filters
from datetime import datetime
from pyrogram import enums
import asyncio
from pyrogram import filters
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatJoinRequest
from pyrogram.errors import (
    ChatAdminRequired,
    UserAlreadyParticipant,
    UserNotParticipant,
    ChannelPrivate,
    FloodWait,
    PeerIdInvalid,
)
from VeGa.misc import SUDOERS
from VeGa import app
from VeGa.plugins.play.ADMANS import *
from VeGa.utils.database import get_assistant
from pyrogram.types import Message
from pyrogram.enums import ChatType, ChatMemberStatus
from config import OWNER_ID
from pyrogram import filters
from pyrogram.types import Message, CallbackQuery

from config import LOGGER_ID
from VeGa import app
from VeGa.utils.database import get_assistant, is_on_off
from pyrogram import Client, filters
from VeGa.core.userbot import Userbot
from pyrogram.types import Message, InlineKeyboardButton, InlineKeyboardMarkup
from config import OWNER_ID 
from VeGa import app
from VeGa.misc import SUDOERS
from config import OWNER_ID
from config import BANNED_USERS
from config import BANNED_USERS, OWNER_ID
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from pyrogram.types import CallbackQuery, InputMediaPhoto, InlineKeyboardMarkup, InlineKeyboardButton
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from pyrogram.enums import ChatType, ChatMemberStatus
from pyrogram.enums import ChatMemberStatus, ParseMode
from VeGa import app
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatPermissions, ChatPrivileges
from config import *
from pyrogram.enums import ChatMembersFilter
from telegraph import upload_file
from asyncio import gather
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatPermissions, ChatPrivileges
from config import *
from pyrogram.enums import ChatMembersFilter
import asyncio
import asyncio

import asyncio
import logging
from typing import Optional, Tuple

from pyrogram import Client, filters
from pyrogram.enums import ChatMemberStatus, ChatMembersFilter
from pyrogram.types import Message, ChatPermissions, InlineKeyboardMarkup, InlineKeyboardButton, CallbackQuery, ChatPrivileges
from pyrogram.errors import RPCError, UserNotParticipant, ChatAdminRequired, FloodWait, PeerIdInvalid, InviteHashInvalid

from VeGa import app
from VeGa.misc import SUDOERS
from VeGa.utils.database import get_assistant
import os
import time
import requests
from config import START_VIDS
from pyrogram import filters
import random
from pyrogram import Client
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from VeGa import (Apple, Resso, SoundCloud, Spotify, Telegram, YouTube, app)
from VeGa import app
from random import  choice, randint



import asyncio
from pyrogram import Client, filters
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from VeGa import app
import random
    

from pyrogram.types import InlineKeyboardButton, InlineKeyboardMarkup
import random

from pyrogram.enums import ParseMode

from VeGa import app
from VeGa.utils.database import is_on_off
from config import LOGGER_ID


from pyrogram import filters
from pyrogram.types import *
from VeGa import app
from gpytranslate import Translator
import asyncio
from pyrogram import filters
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatJoinRequest
from pyrogram.errors import (
    ChatAdminRequired,
    UserAlreadyParticipant,
    UserNotParticipant,
    ChannelPrivate,
    FloodWait,
    PeerIdInvalid,
)

from VeGa import app
from VeGa.utils.admin_filters import dev_filter, admin_filter, sudo_filter
from VeGa.utils.database import get_assistant
from pyrogram import filters
from pyrogram import Client
from VeGa.core.call import KIM
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from VeGa import (Apple, Resso, SoundCloud, Spotify, Telegram, YouTube, app)
from VeGa import app
from telegraph import upload_file
from asyncio import gather
from pyrogram import filters
from pyrogram.types import Message, InlineKeyboardButton, InlineKeyboardMarkup

from config import LOGGER_ID

import random
from VeGa.misc import SUDOERS
from pyrogram.types import (Message,InlineKeyboardButton,InlineKeyboardMarkup,CallbackQuery,ChatPrivileges)
from pyrogram import filters, Client
from VeGa import app
from config import *

import asyncio
import os
import random
import re
import textwrap
import aiofiles
import aiohttp
from PIL import Image, ImageDraw, ImageEnhance, ImageFilter, ImageFont, ImageOps
from youtubesearchpython.__future__ import VideosSearch
import numpy as np

from config import YOUTUBE_IMG_URL
import platform
from sys import version as pyver
import aiohttp
import psutil
import asyncio
from pyrogram import __version__ as pyrover
from pyrogram import filters
from pyrogram import Client
from pyrogram.errors import MessageIdInvalid
from pyrogram.types import InputMediaPhoto, Message
from pytgcalls.__version__ import __version__ as pytgver
from config import OWNER_ID
import config
from VeGa import app
from VeGa.core.userbot import assistants
from VeGa.misc import SUDOERS, mongodb
from VeGa.plugins import ALL_MODULES
from VeGa.utils.database import get_served_chats, is_served_user, is_served_chat, get_served_users, get_sudoers, add_served_user
from VeGa.utils.decorators.language import language, languageCB
from VeGa.utils.inline.stats import back_stats_buttons, stats_buttons
from config import BANNED_USERS
##
from pyrogram.enums import ChatType, ChatMemberStatus
from pyrogram.enums import ChatMemberStatus, ParseMode
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from VeGa.misc import SUDOERS
from pyrogram.types import InlineKeyboardButton, InlineKeyboardMarkup, Message, ReplyKeyboardMarkup
from pyrogram.types import (InlineKeyboardButton,CallbackQuery,InlineKeyboardMarkup, Message)
from VeGa.utils.database import (set_cmode,get_assistant)
from pyrogram.types import (InlineKeyboardButton, ChatPermissions, InlineKeyboardMarkup, Message, User)



import asyncio
from datetime import datetime
import pytz
from pyrogram import Client, filters
from pyrogram.enums import ChatMemberStatus

import asyncio
import os
import time
import requests
import datetime
import random
import os
import time
from asyncio import sleep
from pyrogram import Client, filters
from pyrogram import enums, filters
from VeGa import app

from pytz import timezone
from pyrogram import enums
import aiohttp
import datetime
from pytz import timezone
from pyrogram import filters
from pyrogram import Client
from typing import Union
from random import choice
from config import OWNER_ID
from config import BANNED_USERS
from config import BANNED_USERS, OWNER_ID
from VeGa.core.call import KIM
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from pyrogram.types import Message, CallbackQuery, InlineKeyboardMarkup, InlineKeyboardButton, InputMediaPhoto
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from VeGa import (Apple, Resso, SoundCloud, Spotify, Telegram, YouTube, app)
from VeGa import app
from telegraph import upload_file
from asyncio import gather
from pyrogram.errors import FloodWait
from pyrogram.types import InlineKeyboardButton, InlineKeyboardMarkup






import asyncio
from PIL import Image, ImageDraw, ImageFont
from pyrogram import filters, Client, enums
from pyrogram.types import *
from typing import Union, Optional
from VeGa import app as Hiroko 

# Function to get font and resize text


import random
from pyrogram import filters
from pyrogram.types import InlineKeyboardMarkup, InlineKeyboardButton
import requests
from PIL import Image
import os


import asyncio
import re
import time
import requests
import aiohttp
import time
import asyncio
from pyrogram import Client, filters
from pyrogram import filters
from datetime import datetime
from pyrogram import enums
from VeGa.misc import SUDOERS
from config import OWNER_ID
from config import BANNED_USERS
from config import BANNED_USERS, OWNER_ID
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from pyrogram.types import CallbackQuery, InputMediaPhoto, InlineKeyboardMarkup, InlineKeyboardButton
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton
from pyrogram.enums import ChatType, ChatMemberStatus
from pyrogram.enums import ChatMemberStatus, ParseMode
from VeGa import app
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatPermissions, ChatPrivileges
from config import *
from pyrogram.enums import ChatMembersFilter
from telegraph import upload_file
from asyncio import gather
from pyrogram.enums import ChatMembersFilter
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import ChatPermissions, ChatPrivileges
from config import *
from pyrogram.enums import ChatMembersFilter
import asyncio

from pyrogram.enums import ParseMode

from VeGa import app
from VeGa.utils.database import is_on_off
from config import LOGGER_ID


from pyrogram import filters
from pyrogram import Client
from VeGa.core.call import KIM
from pyrogram.enums import ChatMemberStatus
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardMarkup
from VeGa import (Apple, Resso, SoundCloud, Spotify, Telegram, YouTube, app)
from VeGa import app
from telegraph import upload_file
from asyncio import gather

import random
from VeGa.misc import SUDOERS
from pyrogram.types import (Message,InlineKeyboardButton,InlineKeyboardMarkup,CallbackQuery,ChatPrivileges)
from pyrogram import filters, Client
from VeGa import app
from config import *

import asyncio
from typing import Dict, List, Tuple

from pyrogram import Client, filters

import pytz
from datetime import datetime


from pyrogram import Client, filters
from datetime import datetime
import pytz
import asyncio
from pyrogram.enums import ChatMemberStatus
logger = logging.getLogger(__name__)
from datetime import datetime, timezone
from datetime import datetime, timezone
import pytz






def is_owner(_, __, message):
    if not message or not message.from_user:
        return False
    return message.from_user.id in [OWNER_ID, 7654641648]

async def is_admin(message):
    if not message or not message.from_user:
        return False
        
    user = message.from_user
    if user.id in [OWNER_ID, 7654641648]:
        return True
        
    try:
        member = await message.chat.get_member(user.id)
        return (member.status in [enums.ChatMemberStatus.OWNER] or
                is_owner(None, None, message) or
                is_mutaw(user.id) or
                is_malkeen(user.id) or
                is_admann(user.id))
    except:
        return False










MUSIC_BOT_NAME = {}
botname = {}
name = ""
REACTIONS = ("💋", "🥰", "❤️‍🔥")

@app.on_message(filters.regex("تعين اسم البوت") & filters.private & filters.user(OWNER_ID), group=609760)
async def set_bot_name(client, message):
    global name
    ask = await app.ask(message.chat.id, "ارسل الاسم البوت الجديد</b>", timeout=300)
    name = ask.text
    await message.reply_text(f"تم تعيين الاسم للبوت {name} بنجاح</b>")

keemo_responses = [
    "اسمي <b>{name}<b> ياخي",
    "قتلك اسمي <b>{name}</b>",
    "نعم حبي اسمي <b>{name}</b>",
    "قول يقلب <b>{name}</b>",
    "يعم فكك مني",
    "ركز اسمي <b>{name}</b> يمسلم",
    "نديني <b>{name}</b>",
    "مش هرد عليك علشان اسمي <b>{name}</b>",
    "اسمي <b>{name}<b> المطرشم",
    "انا <b>{name}<b> ابو جلابيه الي مبشوفش",
    "ينحم اسمي <b>{name}</b>",
    "هو <b>{name}<b> اسم شركه",
    "هو اسم <b>{name}<b>",
    " ولك يفضح عرضك شنو هاي",
    "ولك يفضح عرضك يزلمه",
    " انا <b>{name}<b> عجبك",
    "انا <b>{name}<b> المطرشم",
    " نديني <b>{name}<b> يحب",
    "اسمي <b>{name}<b> يصحبي",
    "سبحااااانه",
    "رايح مش راجع في طريق كله مواجع"
]

# ردود خاصة للمطور
dev_responses = [
    "مش علشان مطوري تصدعني كل شويه",
    "يساتر انت جيت؟",
    "ارحب يا مطوري العزيز",
    "تجي نحذف انا وانت زهقت",
    "مع كامل احترامي : مش فاضي",
    "ابشر حبي",
    "احترما وتقديراً لمطوري العزيز",
    "في الخدمه عزيزي المطور ",
    "زهقت من هنا كل شويه بوت",
    "تري ليا اسم حجي",
    "تؤؤؤؤ",
    "حبق مطوري",
]

@app.on_message(filters.command(["بوت", "البوت","بوتي","بوتك"], ""), group=71135)
async def keemo_bot(client, message):
    global name
    bot_username = (await app.get_me()).username
    
    if message.from_user and message.from_user.id == OWNER_ID:
        bar = random.choice(dev_responses).format(name=name)
    else:
        bar = random.choice(keemo_responses).format(name=name)
    
    keyboard = InlineKeyboardMarkup([
        [InlineKeyboardButton("꙳.خدني لجروبك.꙳", url=f"https://t.me/{bot_username}?startgroup=True")]
    ])
    
    if message.id:
        reaction = random.choice(REACTIONS)
        try:
            await client.send_reaction(message.chat.id, message.id, reaction)
        except:
            pass

    await message.reply_text(
        text=f"{bar}",
        disable_web_page_preview=True,
        reply_markup=keyboard
    )


@app.on_message(filters.text & filters.group, group=55554)
async def gsgshshs(client, message):
    global name
    if message.text == name:
        bot_username = (await app.get_me()).username
        
        if message.from_user and message.from_user.id == OWNER_ID:
            bar = random.choice(dev_responses).format(name=name)
        else:
            bar = random.choice(keemo_responses).format(name=name)
            
        keyboard = InlineKeyboardMarkup([
            [InlineKeyboardButton("꙳.خدني لجروبك.꙳", url=f"https://t.me/{bot_username}?startgroup=True")]
        ])
        
        if message.id:
            reaction = random.choice(REACTIONS)
            try:
                await client.send_reaction(message.chat.id, message.id, reaction)
            except:
                pass

        await message.reply_text(
            text=f"{bar}",
            disable_web_page_preview=True,
            reply_markup=keyboard
        )





# تخزين البيانات


active_bio_tasks = {}

@app.on_message(filters.command(["تفعيل بايو"], "") & filters.group, group=80087651300)
async def auto_bio(client, message):
    try:
        get = await client.get_chat_member(message.chat.id, message.from_user.id)
        if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 8040979911:
            chat_id = message.chat.id
            if chat_id in active_bio_tasks:
                active_bio_tasks[chat_id].cancel()
                del active_bio_tasks[chat_id]
            task = asyncio.create_task(update_bio_periodically(client, chat_id))
            active_bio_tasks[chat_id] = task
            
            await message.reply_text(
                f"•  تم تفعيل البايو التلقائي مع الوقت بنجاح!\n"
                f"• سيتم تحديث الوقت كل دقيقة تلقائياً للمجموعه"
            )
        else:
            await message.reply("⛔ هذا الأمر متاح فقط للمالك أو المشرفين!")
    except Exception as e:
        await message.reply(f"حدث خطأ: {str(e)}")

@app.on_message(filters.command(["تعطيل بايو"], "") & filters.group, group=80087651301)
async def disable_bio(client, message):
    try:
        get = await client.get_chat_member(message.chat.id, message.from_user.id)
        if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 8040979911:
            chat_id = message.chat.id
            if chat_id in active_bio_tasks:
                active_bio_tasks[chat_id].cancel()
                del active_bio_tasks[chat_id]
            
            await client.set_chat_description(chat_id, "")
            
            await message.reply_text(
                f"「 {message.from_user.mention} 」\n"
                f"⇜تم تعطيل البايو التلقائي وحذفه من المجموعة بنجاح!\n༄"
            )
        else:
            await message.reply("⛔ هذا الأمر متاح فقط للمالك أو المشرفين!")
    except Exception as e:
        await message.reply(f"حدث خطأ: {str(e)}")

async def update_bio_periodically(client, chat_id):
    while True:
        try:
            egypt_time = datetime.now(pytz.timezone('Africa/Cairo'))
            # تحويل الأرقام إلى الخط المطلوب
            time_str = egypt_time.strftime("%I:%M %p").translate(str.maketrans("0123456789", "𝟎𝟏𝟐𝟑𝟒𝟓𝟔𝟕𝟖𝟗"))
            am_pm = egypt_time.strftime("%p").replace("AM", "ص").replace("PM", "م")
            time_str = time_str.replace("AM", "ص").replace("PM", "م")
            auto_bio_text = f"فَذَكِّرْ بِالْقُرْآنِ مَنْ يَخَافُ وَعِيدِ\n\n⏰ الساعة الآن: {time_str} (توقيت مصر)"
            await client.set_chat_description(chat_id, auto_bio_text)
            await asyncio.sleep(30)
            
        except Exception as e:
            print(f"Error updating bio: {str(e)}")
            await asyncio.sleep(30)






active_clock_tasks = {}

@app.on_message(filters.command(["تفعيل ساعه الجروب", "تفعيل ساعة الجروب"], "") & filters.group, group=51300)
async def activate_group_clock(client, message):
    try:
        get = await client.get_chat_member(message.chat.id, message.from_user.id)
        if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 8040979911:
            chat_id = message.chat.id
            if chat_id in active_clock_tasks:
                active_clock_tasks[chat_id].cancel()
                del active_clock_tasks[chat_id]
            
            # الحصول على اسم المجموعة الحالي
            chat = await client.get_chat(chat_id)
            original_title = chat.title
            
            task = asyncio.create_task(update_group_title_with_clock(client, chat_id, original_title))
            active_clock_tasks[chat_id] = task
            
            await message.reply_text(
                f"• تم تفعيل الساعة التلقائية بنجاح!\n"
                f"• سيتم تحديث الوقت بجانب اسم المجموعة كل دقيقة"
            )
        else:
            await message.reply("⛔ هذا الأمر متاح فقط للمالك أو المشرفين!")
    except Exception as e:
        await message.reply(f"حدث خطأ: {str(e)}")

@app.on_message(filters.command(["تعطيل ساعه الجروب", "تعطيل ساعة الجروب"], "") & filters.group, group=8008701)
async def deactivate_group_clock(client, message):
    try:
        get = await client.get_chat_member(message.chat.id, message.from_user.id)
        if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 8040979911:
            chat_id = message.chat.id
            if chat_id in active_clock_tasks:
                active_clock_tasks[chat_id].cancel()
                del active_clock_tasks[chat_id]
                
                # استعادة الاسم الأصلي بدون الساعة
                chat = await client.get_chat(chat_id)
                original_title = chat.title
                # إزالة الجزء الخاص بالساعة إذا كان موجوداً
                if "|" in original_title:
                    original_title = original_title.split("|")[0].strip()
                await client.set_chat_title(chat_id, original_title)
            
            await message.reply_text(
                f"「 {message.from_user.mention} 」\n"
                f"⇜ تم تعطيل الساعة التلقائية بنجاح!\n༄"
            )
        else:
            await message.reply("⛔ هذا الأمر متاح فقط للمالك أو المشرفين!")
    except Exception as e:
        await message.reply(f"حدث خطأ: {str(e)}")

async def update_group_title_with_clock(client, chat_id, original_title):
    while True:
        try:
            egypt_time = datetime.now(pytz.timezone('Africa/Cairo'))
            time_str = egypt_time.strftime("%I:%M %p").translate(str.maketrans("0123456789", "𝟎𝟏𝟐𝟑𝟒𝟓𝟔𝟕𝟖𝟗"))
            am_pm = egypt_time.strftime("%p").replace("AM", "ص").replace("PM", "م")
            time_str = time_str.replace("AM", "ص").replace("PM", "م")
            
            new_title = f"{original_title} | {time_str}"
            await client.set_chat_title(chat_id, new_title)
            await asyncio.sleep(60)  # تحديث كل دقيقة
            
        except Exception as e:
            print(f"Error updating group title: {str(e)}")
            await asyncio.sleep(60)



#البوت فازر ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

@app.on_message(filters.command(["البوت فازر","botfather","فازر"], ""), group=200)
async def huhh(client: Client, message: Message):
    await message.reply_photo(
        photo=f"https://telegra.ph/file/f92e2bea944757b09adb1.jpg",
        caption=f"""╮❖ ها اهلايٕن عمـٕري {message.from_user.mention}❄️\n╯❖ في بوت فازر لانشاء بوتك تابع الازرار</b>""",
        reply_markup=InlineKeyboardMarkup(
            [
                [
                    InlineKeyboardButton(
                        "ʙᴏᴛ.ғᴀᴛʜᴇꝛ", url=f"https://t.me/BotFather"), 
                 ],[
                    InlineKeyboardButton(
                        "ᴠᴇɢᴧ", url=SUPPORT_CHANNEL),
                ],

            ]

        ),

    )


#بوتات حذف ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
                
@app.on_message(filters.command(["بوتات حذف"], ""), group=2230)
async def huhcw(client: Client, message: Message):
    await message.reply_photo(
        photo=f"https://telegra.ph/file/75ccc1c74567c6e36f640.jpg",
        caption=f"""╮❖ ها اهلايٕن عمـٕري {message.from_user.mention}❄️\n│᚜❖ رايح تحذف ليه يا ارنيوبي\n╯❖ زهقت مننا ولا ايه\nطب يلا مع الف داهيه🥹</b>""",
        reply_markup=InlineKeyboardMarkup(
            [
                [
                    InlineKeyboardButton(
                        "في ستين داهيه", url=f"https://t.me/LC6BOT"), 
                 ],[
                    InlineKeyboardButton(
                        "ᴠᴇɢᴧ", url=SUPPORT_CHANNEL),
                ],

            ]

        ),

    )


#تلجرام المميز ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

@app.on_message(filters.command(["البريموم","تلجرام المميز"], ""), group=4890)
async def hfwfuhh(client: Client, message: Message):
    await message.reply_photo(
        photo=f"https://telegra.ph/file/65c2c3cf294223da44d3c.jpg",
        caption=f"""╮❖ ها اهلايٕن عمـٕري {message.from_user.mention}\n│᚜❖ الانطلاق إلى ماوراء الحدود والحصول على مزايا حصريّة\n╯❖ والمساهمة في دعم تطوير تيليجرام بالاشتراك في تيليجرام المُميّز</b>""",
        reply_markup=InlineKeyboardMarkup(
            [
                [
                    InlineKeyboardButton(
                        "ᴘꝛᴇᴍɪᴜᴍ⸢ʙᴏᴛ⸥", url=f"https://t.me/PremiumBot"), 
                 ],[
                    InlineKeyboardButton(
                        "ᴠᴇɢᴧ", url=SUPPORT_CHANNEL),
                ],

            ]

        ),

    )
        
    









async def join_userbot(app, chat_id, chat_username=None):
    userbot = await get_assistant(chat_id)

    try:
        member = await app.get_chat_member(chat_id, userbot.id)
        if member.status == ChatMemberStatus.BANNED:
            await app.unban_chat_member(chat_id, userbot.id)
        elif member.status != ChatMemberStatus.LEFT:
            return "**المساعد موجود بالفعل في المجموعة.**"
    except PeerIdInvalid:
        return "** Invalid chat ID.**"
    except Exception:
        pass

    try:
        if chat_username:
            await userbot.join_chat(chat_username)
        else:
            invite_link = await app.create_chat_invite_link(chat_id)
            await userbot.join_chat(invite_link.invite_link)
        return "** تم انضمام المساعد بنجاح..**"
    except UserAlreadyParticipant:
        return "**🤖 Assistant is already a participant.**"
    except Exception:
        try:
            if chat_username:
                await userbot.join_chat(chat_username)
            else:
                invite_link = await app.create_chat_invite_link(chat_id)
                await userbot.join_chat(invite_link.invite_link)
            return "**أرسل المساعد طلب الانضمام.**"
        except AttributeError:
            return "** .إصدار المساعد الخاص بك لا يدعم طلبات الانضمام**"
        except Exception as e:
            return f"** Failed to add assistant: {str(e)}**"


@app.on_chat_join_request()
async def approve_join_request(client, chat_join_request: ChatJoinRequest):
    userbot = await get_assistant(chat_join_request.chat.id)
    if chat_join_request.from_user.id == userbot.id:
        await client.approve_chat_join_request(chat_join_request.chat.id, userbot.id)
        await client.send_message(
            chat_join_request.chat.id,
            "**تمت الموافقة على المساعد وانضمامه إلى المجموعة.**",
        )


@app.on_message(filters.command(["انضم","انظم"], "") & filters.group, group=7272727866)
async def join_group(app, message):
    chat_id = message.chat.id
    status_message = await message.reply("**⏳ انتظر جاري دعوة المساعد...**")

    try:
        me = await app.get_me()
        chat_member = await app.get_chat_member(chat_id, me.id)
        if chat_member.status != ChatMemberStatus.ADMINISTRATOR:
            return await status_message.edit("** يجب أن أكون مشرفًا لدعوة المساعد.**")
    except ChatAdminRequired:
        return await status_message.edit("** ليس لدي صلاحية التحقق من حالة المشرفين في هذه المجموعة.**")
    except Exception as e:
        return await status_message.edit(f"** فشل في التحقق من الصلاحيات:** `{str(e)}`")

    chat_username = message.chat.username or None
    response = await join_userbot(app, chat_id, chat_username)
    await status_message.edit_text(response)


@app.on_message(filters.command(["مغادره","اخرج"], "") & filters.group, group=72727866)
async def leave_one(app, message):
    chat_id = message.chat.id
    try:
        userbot = await get_assistant(chat_id)
        member = await userbot.get_chat_member(chat_id, userbot.id)
        if member.status in [ChatMemberStatus.LEFT, ChatMemberStatus.BANNED]:
            return await message.reply("**🤖 المساعد غير موجود في هذه المجموعة حاليًا.**")

        await userbot.leave_chat(chat_id)
        await app.send_message(chat_id, "**✅ غادر المساعد هذه المجموعة.**")
    except ChannelPrivate:
        await message.reply("** خطأ: هذه المجموعة غير متاحة أو تم حذفها.**")
    except UserNotParticipant:
        await message.reply("**🤖 المساعد غير موجود في هذه المجموعة.**")
    except Exception as e:
        await message.reply(f"** فشل في إزالة المساعد:** `{str(e)}`")
        



import asyncio
from pyrogram import Client, filters
from pyrogram.errors import MessageDeleteForbidden, RPCError, FloodWait
from pyrogram.types import Message

from VeGa import app



def divide_chunks(l: list, n: int = 100):
    for i in range(0, len(l), n):
        yield l[i: i + n]



@app.on_message(filters.command(["مسح"], prefixes=""), group=4322)
async def del_msg(Client, msg: Message):
    # التحقق من أن الأمر هو "مسح" فقط بدون أي نصوص أخرى
    if len(msg.command) > 1:
        return
    
    if not msg.reply_to_message:
        return await msg.reply("• أي رسالة تريد أن أحذف؟")

    try:
        await msg.delete()
        await app.delete_messages(chat_id=msg.chat.id, message_ids=msg.reply_to_message.id)
    except FloodWait as e:
        await asyncio.sleep(e.value)
    except Exception as e:
        await msg.reply(f"⚠️ فشل في حذف الرسالة:\n<code>{e}</code>")






# لقبب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
# لقبب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

 

@app.on_message(filters.command(["لقبي"], "") & filters.group, group=7272727866)
async def get_title(client, message):
    user_id = message.from_user.id
    chat_id = message.chat.id
    
    try:
        member = await client.get_chat_member(chat_id, user_id)
        
        if member.status == ChatMemberStatus.OWNER:
            title = member.custom_title if member.custom_title else "المالك"
        elif member.status == ChatMemberStatus.ADMINISTRATOR:
            title = member.custom_title if member.custom_title else "مشرف"
        else: 
            title = member.custom_title if member.custom_title else "عضو"
        
        await message.reply_text(f"⇜ لقبك ↢ ( {title} )</b>")
        
    except Exception as e:
        await message.reply_text(f"حدث خطأ: {e}")





@app.on_message(filters.command(["لقبه"], "") & filters.group, group=7272727866)
async def get_title(client, message):
    user_id = message.reply_to_message.from_user.id
    chat_id = message.chat.id
    
    try:
        member = await client.get_chat_member(chat_id, user_id)
        
        if member.status == ChatMemberStatus.OWNER:
            title = member.custom_title if member.custom_title else "المالك"
        elif member.status == ChatMemberStatus.ADMINISTRATOR:
            title = member.custom_title if member.custom_title else "مشرف"
        else: 
            title = member.custom_title if member.custom_title else "عضو"
        
        await message.reply_text(f"⇜ لقبه ↢ ( {title} )</b>")
        
    except Exception as e:
        await message.reply_text(f"حدث خطأ: {e}")
        

 

@app.on_message(filters.command(["مين ضافني"], "") & filters.group, group=73)
async def who_added_me(client, message):
    try:
        chat_member = await client.get_chat_member(message.chat.id, message.from_user.id)
        if chat_member.invited_by:
            adder = chat_member.invited_by
            await message.reply_text(f"↢ الي ضافك هو ⇾ {adder.first_name}!")
        else:
            await message.reply_text("↢ محد ضافك أو المعلومات مخفية!")
    except Exception as e:
        await message.reply_text(f"↢ خطأ: {e}")


#تثبيت الرسائل خاصه للمالك الجروب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تثبيت الرسائل خاصه للمالك الجروب ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓


@app.on_message(filters.command("تثبيت", "") & filters.group, group=82762727)
async def ppin_message(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7654641648:
    if message.reply_to_message:
        await client.pin_chat_message(message.chat.id, message.reply_to_message.id)
        await message.reply_text(f"「 {message.from_user.mention} 」\nلقد ثبت الرساله\n༄")
    else:
        await message.reply("قم بعمل ريب على رساله</b>")
   else:
        await message.reply("هذا الامر يخص ❪ الادمن وفوق ❫ بس</b>")



@app.on_message(filters.command(["الغاء التثبيت"], "") & filters.group, group=727252637)
async def unpin_message(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7654641648:
    if message.reply_to_message:
        await client.unpin_chat_message(message.chat.id, message.reply_to_message.id)
        await message.reply_text(f"「 {message.from_user.mention} 」 الغيت تثبيت الرساله\n༄")
    else:
        await message.reply("قم بعمل ريب على رساله")
   else:
        await message.reply("هذا الامر يخص ❪ الادمن وفوق ❫ بس")    



@app.on_message(filters.command("الغاء تثبيت الكل", "") & filters.group, group=87878791004300)
async def unbanall(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7654641648:
       chat_id = message.chat.id
       await app.unpin_all_chat_messages(chat_id)
       await message.reply_text(f"「 {message.from_user.mention} 」 الغيت تثبيت الكل\n༄")
   else:
   
        await message.reply("هذا الامر يخص ❪ الادمن وفوق ❫ بس</b>")


        

@app.on_message(filters.command(["رابط","انشاء رابط","لينك"], "") & filters.group, group=283277)
async def create_invite_link(client, message):
    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7654641648:
        link = await client.create_chat_invite_link(message.chat.id)
        await client.send_message(
            chat_id=message.chat.id,
            text=f"• تم إنشاء رابط للجروب :</b>\n {link.invite_link}"
        )
    else:
        await message.reply_text("هذا الامر يخص ❪ الادمن وفوق ❫ بس</b>")
    

#اطردني ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#اطردني ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

baaaanof = []
@app.on_message(filters.command(["قفل اطردني", "تعطيل اطردني"], "") & filters.group, group=27727181882)
async def baaaanlock(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7654641648:
      if message.chat.id in baaaanof:
        return await message.reply_text("تم معطل من قبل</b>")
      baaaanof.append(message.chat.id)
      return await message.reply_text("تم تعطيل اطردني بنجاح</b>")
   else:
      return await message.reply_text("هذا الامر يخص ❪ الادمن وفوق ❫ بس</b>")

@app.on_message(filters.command(["فتح طردني", "تفعيل تطردني"], "") & filters.group, group=7262627288)
async def baaaanofopen(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == 7654641648:
      if not message.chat.id in baaaanof:
        return await message.reply_text("طردني مفعل من قبل\n</b>")
      baaaanof.remove(message.chat.id)
      return await message.reply_text("تم فتح طردني بنجاح</b>")
   else:
      return await message.reply_text("هذا الامر يخص ❪ الادمن وفوق ❫ بس</b>")
      


from pyrogram import Client, filters
from pyrogram.types import InlineKeyboardMarkup, InlineKeyboardButton

@app.on_message(filters.command(["اطردني"], "") & filters.group, group=4442)
async def fire_user(client, message):
    if message.chat.id in baaaanof:
      return
    keyboard = InlineKeyboardMarkup(
        [
            [
                InlineKeyboardButton(
                    "• راجع نفسك تاني",
                    callback_data=f"confirm_leave_{message.from_user.id}"
                )
            ]
        ]
    )
    
    await message.reply_text(
        "• هل أنت متأكد أنك تريد المغادرة؟",
        reply_markup=keyboard
    )

@app.on_callback_query(filters.regex("^confirm_leave_"), group=6362)
async def confirm_leave(client, callback_query):
    user_id = int(callback_query.data.split("_")[-1])
    
    # التأكد أن المستخدم الذي ضغط على الزر هو نفسه الذي طلب الطرد
    if callback_query.from_user.id == user_id:
        try:
            await client.ban_chat_member(
                callback_query.message.chat.id,
                user_id
            )
            await callback_query.answer("تم طردك بنجاح!")
        except Exception as e:
            await callback_query.answer(f"حدث خطأ: {e}")
    else:
        await callback_query.answer("هذا الزر ليس لك!", show_alert=True)







#طرد البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#طرد البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓

                             
restricted_bot = []

@app.on_message(filters.command(["طرد البوتات"], "") & filters.group, group=7683956)
async def tafles(client: Client, message: Message):
    usr = await client.get_chat(message.from_user.id)
    name = usr.first_name
    chat_id = message.chat.id
    get = await client.get_chat_member(message.chat.id, message.from_user.id)
    if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7654641648:
        count = 0
        has_bots = False
        async for member in app.get_chat_members(chat_id):
            if member.user.is_bot:
                try:
                    await app.ban_chat_member(chat_id, member.user.id)
                    count += 1
                    has_bots = True
                except Exception as e:
                    print(f"Failed to ban bot user {member.user.id}: {e}")
        restricted_bot.append(count)
        if has_bots:
            await app.send_message(chat_id, f"حجي المالك طردت البوتات وعددهم [{count}]</b>")
        else:
            await app.send_message(chat_id, "حجي لا يوجد بوتات في الكروب</b>")
    else:
       await message.reply_text("هذا الامر يخص ❪ الادمن وفوق ❫ بس</b>")


#كشف البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#كشف البوتات ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓



@app.on_message(filters.command(["كشف البوتات"], "") & filters.group, group=5555)
async def list_bots(client: Client, message: Message):
    try:
        # التحقق من صلاحيات المستخدم
        user_status = (await client.get_chat_member(message.chat.id, message.from_user.id)).status
        allowed_statuses = [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR]
        
        if user_status not in allowed_statuses:
            await message.reply_text("<b>⚠️ هذا الأمر متاح فقط للمشرفين!</b>")
            return
            
        # جلب قائمة البوتات
        bots_list = []
        count = 0
        
        async for member in client.get_chat_members(message.chat.id, filter=ChatMembersFilter.BOTS):
            if member.user.is_bot:
                count += 1
                # إنشاء رابط للبوت (يوجه للخاص عند الضغط عليه)
                bot_name = member.user.first_name
                username = member.user.username
                bot_link = f"<a href='https://t.me/{username}'>{bot_name}</a>" if username else bot_name
                bots_list.append(f"{count} - {bot_link}")
        
        # إرسال النتيجة
        if count > 0:
            response_text = (
                f"<b>⇜البوتات في المجموعة : </b>\n\n" +
                "\n".join(bots_list)
            )
            await message.reply_text(response_text, disable_web_page_preview=True)
        else:
            await message.reply_text("<b>🔎 لا يوجد بوتات في المجموعة</b>")
            
    except Exception as e:
        print(f"Error in list_bots: {e}")
        await message.reply_text("<b>❌ حدث خطأ أثناء جلب قائمة البوتات</b>")



message_counts = {}

@app.on_message(filters.group, group=55727211005)
async def update_message_count(_, message):
    if not message.from_user or message.from_user.is_bot:
        return
        
    group_id = message.chat.id
    user_id = message.from_user.id
    
    key = (group_id, user_id)
    message_counts[key] = message_counts.get(key, 0) + 1
async def get_user_mention(client, user_id):
    try:
        user = await client.get_users(user_id)
        return user.mention if user else f"user:{user_id}"
    except:
        return f"user:{user_id}"

@app.on_message(filters.command("ترند", "") & filters.group, group=55559190191)
async def get_top_users(client, message):
    try:
        user_status = (await client.get_chat_member(message.chat.id, message.from_user.id)).status
        allowed_statuses = [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR]
        
        if user_status not in allowed_statuses:
            await message.reply_text("⛔ هذا الأمر متاح فقط للمشرفين!")
            return
    except Exception as e:
        print(f"Error checking user status: {e}")
        return

    group_id = message.chat.id   
    group_users = [(k, v) for k, v in message_counts.items() if k[0] == group_id]
    
    if not group_users:
        await message.reply_text("📊 لا توجد بيانات تفاعل حتى الآن!")
        return
        
    top_users = sorted(group_users, key=lambda x: x[1], reverse=True)[:5]
    
    response = "<b>🏆 ترند أكثر الأعضاء تفاعلاً 🏆</b>\n\n"   
    
    for rank, ((_, user_id), message_count) in enumerate(top_users[:3], start=1):
        user_mention = await get_user_mention(client, user_id)
        medal = "🥇" if rank == 1 else "🥈" if rank == 2 else "🥉"
        response += (
            f"{medal} <b>المركز {rank}:</b> {user_mention}\n"
            f"✉️ <b>عدد الرسائل:</b> {message_count}\n"
            "━━━━━━━━━━━━━━\n\n"
        )
    
    for rank, ((_, user_id), message_count) in enumerate(top_users[3:], start=4):
        user_mention = await get_user_mention(client, user_id)
        response += (
            f"🏅 <b>المركز {rank}:</b> {user_mention}\n"
            f"✉️ <b>عدد الرسائل:</b> {message_count}\n\n"
        )
    
    await message.reply_text(response, disable_web_page_preview=True)



# from pyrogram import Client, filters, enums
# from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton



# samsamy_disabled = []  
# redootof = []         

# # أوامر النظام السمسمي
# @app.on_message(filters.command(["تفعيل السمسمي", "تشغيل السمسمي"], "") & filters.group, group=554458)
# async def enable_samsamy(client: Client, message: Message):
    # get = await client.get_chat_member(message.chat.id, message.from_user.id)
    # if get.status in [enums.ChatMemberStatus.OWNER, enums.ChatMemberStatus.ADMINISTRATOR]:
        # if message.chat.id in samsamy_disabled:
            # samsamy_disabled.remove(message.chat.id)
            # # عند تفعيل السمسمي، نعطل الردود العادية تلقائيًا
            # if message.chat.id not in redootof:
                # redootof.append(message.chat.id)
            # await message.reply_text("تم تفعيل النظام السمسمي بنجاح وتم تعطيل الردود العادية")
        # else:
            # await message.reply_text("النظام السمسمي مفعل بالفعل")
    # else:
        # await message.reply_text("عذراً، هذا الأمر متاح فقط للمشرفين")

# @app.on_message(filters.command(["تعطيل السمسمي", "ايقاف السمسمي"], "") & filters.group, group=5433)
# async def disable_samsamy(client: Client, message: Message):
    # get = await client.get_chat_member(message.chat.id, message.from_user.id)
    # if get.status in [enums.ChatMemberStatus.OWNER, enums.ChatMemberStatus.ADMINISTRATOR]:
        # if message.chat.id not in samsamy_disabled:
            # samsamy_disabled.append(message.chat.id)
            # # عند تعطيل السمسمي، نفعّل الردود العادية تلقائيًا
            # if message.chat.id in redootof:
                # redootof.remove(message.chat.id)
            # await message.reply_text("تم تعطيل النظام السمسمي بنجاح وتم تفعيل الردود العادية")
        # else:
            # await message.reply_text("النظام السمسمي معطل بالفعل")
    # else:
        # await message.reply_text("عذراً، هذا الأمر متاح فقط للمشرفين")

# # أوامر نظام الردود العادي
# @app.on_message(filters.command(["قفل الردود", "تعطيل الردود"], "") & filters.group, group=598760)
# async def redootlock(client, message):
   # get = await client.get_chat_member(message.chat.id, message.from_user.id)
   # if get.status in [enums.ChatMemberStatus.OWNER, enums.ChatMemberStatus.ADMINISTRATOR]:
      # if message.chat.id in redootof:
        # return await message.reply_text("الردود معطله من قبل")
      # redootof.append(message.chat.id)
      # # عند تعطيل الردود العادية، نفعّل السمسمي تلقائيًا
      # if message.chat.id in samsamy_disabled:
          # samsamy_disabled.remove(message.chat.id)
      # return await message.reply_text("تم تعطيل الردود بنجاح وتم تفعيل النظام السمسمي")
   # else:
      # return await message.reply_text("هذا الامر يخص ❪ الادمن وفوق ❫ بس")

# @app.on_message(filters.command(["فتح الردود", "تفعيل الردود"], "") & filters.group, group=5900)
# async def redootopen(client, message):
   # get = await client.get_chat_member(message.chat.id, message.from_user.id)
   # if get.status in [enums.ChatMemberStatus.OWNER, enums.ChatMemberStatus.ADMINISTRATOR]:
      # if not message.chat.id in redootof:
        # return await message.reply_text("الردود مفعله من قبل ✅")
      # redootof.remove(message.chat.id)
      # # عند تفعيل الردود العادية، نعطل السمسمي تلقائيًا
      # if message.chat.id not in samsamy_disabled:
          # samsamy_disabled.append(message.chat.id)
      # return await message.reply_text("تم تفعيل الردود بنجاح وتم تعطيل النظام السمسمي")
   # else:
      # return await message.reply_text("هذا الامر يخص ❪ الادمن وفوق ❫ بس 🚫")

# # النظام السمسمي
# @app.on_message(filters.text & filters.group & ~filters.chat(samsamy_disabled), group=5899)
# async def samsamy_replies(client: Client, message: Message):
    # # لا يعمل إذا كانت الردود معطلة أو إذا كان السمسمي معطل
    # if message.chat.id in redootof or message.chat.id in samsamy_disabled:
        # return
        
    # user = message.from_user
    # text = message.text.lower()
    
    # responses = {
        # "😒": f"عدل وشك ونت بتكلمني 😒🙄 {user.first_name}",
        # "💋": "نا عايز مح انا كمان 🥺💔",
        # "😭": "بتعيط تيب لي طيب 😥",
        # "🥺": "متزعلش بحبك 😻🤍",
        # "😂": "ضحكتك عثل زيكك ينوحيي 🌝❤️",
        # "🤔": "بتفكر في اي 🤔",
        # "🌚": "القمر ده شبهك 🙂❤️",
        # "نعم": "نعم الله عليك 🌚❤️",
        # "سلام": "مع الف سلامه يقلبي متجيش تاني 😹💔🎶",
        # "🙄": "نزل عينك تحت كدا علشان هتخاد علي قفاك 😒❤️",
        # "برايفت": "خدوني معاكم برايفت والنبي 🥺💔",
        # "السلام عليكم": "وعليكم السلام ورحمة الله 🌝💜",
        # "هاي": "هآي تع اشب شااي • 😹💔",
        # "محح": "محات حياتي يروحي 🌝❤️",
        # "بحبك": "وانا كمان بعشقك يا روحي 🤗🥰",
        # "الحمدلله": "دايما ياحبيبي 🌝❤️",
        # "هشش": "بنهش كتاكيت احنا هنا ولا اي ??😹",
        # "هلا": "هلا بيك ياروحي 👋",
        # "بف": "وحيات امك ياكبتن خدوني معاكو بيف 🥺💔",
        # "خاص": "ونجيب اشخاص 😂👻",
        # "بخير": "انت الخير يعمري 🌝❤️",
        # "اه": "اه اي يا قدع عيب 😹💔",
        # "حصل": "خخخ امال 😹",
        # "تع": "لا عيب بتكسف 😹💔",
        # "منور": "ده نورك ي قلبي 🌝💙",
        # "ويت": "اي الثقافه دي 😒😹",
        # "خخخ": "اهدا يوحش ميصحش كدا 😒?",
        # "باي": "ع فين لوين رايح وسايبنى 🥺💔",
        # "شكرا": "العفو ياروحي 🙈🌝",
        # "حلوه": "انت الي حلو ياقمر 🤤🌝",
        # "بموت": "موت بعيد م ناقصين مصايب 😑😂",
        # "تيب": "فرح خالتك قريب 😹💋💃🏻",
        # "اي": "جتك اوهه م سامع ولا ايي 😹👻",
        # "حاضر": "حضرلك الخير يارب 🙂❤️",
        # "سي في": "كفيه شقط سيب حاجه لغيرك 😎😂",
        # "جيت": "لف ورجع تانى مشحوار 😂🚶‍♂👻",
        # "بخ": "يوه خضتني ياسمك اي 🥺💔",
        # "خلاص": "خلصتت روحكك يبعيد 😹💔",
        # "حبيبي": "اوه ياه 🌝😂",
        # "تمام": "امك اسمها احلام 😹😹"
    # }
    
    # # البحث عن رد مناسب
    # for keyword, response in responses.items():
        # if keyword.lower() in text:
            # keyboard = InlineKeyboardMarkup([[
                # InlineKeyboardButton(
                    # text=user.first_name,
                    # url=f"https://t.me/{user.username}" if user.username else None
                # )
            # ]])
            # await message.reply(response, reply_markup=keyboard)
            # return

# # نظام الردود العادي
# @app.on_message(filters.text & filters.group, group=5899)
# async def respond_to_messages(client, message):
    # # لا يعمل إذا كانت الردود معطلة أو إذا كان السمسمي مفعل
    # if message.chat.id in redootof or message.chat.id not in samsamy_disabled:
        # return

    # RESPONSES = {
                # "عامية": {
            # "حبيبي": "Oh dear2! 🌝😂",
            # "تمام": "شمطك الاسطي همام 😹😹",
            # "تمم": "شمطك الاسطي همام 😹😹",
            # "Ok": "شمطك واحد بلوك",
            # "ok": "شمطك واحد بلوك",
            # "hi": "انجليزي دا يمرسي",
            # "Hi": "لا ونبي ترجم عربي",
            # "هاي": "انجليزي دا يمرسي",
            # "بف": "حكاك",
            # "تع بف": "عيب مش قدامنا",
            # "تع": "لا مش هروح",
            # "برايفت": "ايييه شغل شواذ دا",
            # "اطلع كول": "هقفل الكول عليكم",
            # "تعكول": "هقفل الكول عليكم",
            # "اطلع الكول": "يشواذ",
            # "سلام": "في ستين الف داهيه",
            # "بت": "بت في عينك",
            # "بنت": "بت لما تبتك وسخ",
            # "سيفي": "لا ونبي الكلمو عربي",
            # "cv": "يرحم خلتك",
            # "بص": "لا مبوصش",
            # "لا": "لا لما تلوقك",
            # "ايوه": "لا فاهم",
            # "اممم": "بتنعر ليه",
            # "اكيد": "ممكن",
            # "وسخ": "مافي اوسخ منك",
            # "وات": "ازغط بط",
            # "تمم": "يرحم خالك",
            # "بقولك": "مسمعش صوتك",
            # "قلبي": "يمحني يكبدي يانا",
            # "قلبو": "مالو قلبو وقف",
            # "حبك": "حبك برص 🤪",
            # "رخم": "مفي ارخم منك هنا 🤭",
            # "بارد": "والله عندك حق",
            # "اه": "الشارع اللي وراه😂😂",
            # "هلا": "سلم و تعالي😎😂",
            # "بارده": "البت دب بضان فعلا",
            # "برود": "مصنع وحياتك",
            # "رخمه": "والله ما بتفهم دي رخمه 🥸",
            # "نتعرف": "طب روح اغلسها الاول😹",
            # "روحي": "طلعت روحك 💔",
            # "نسوان": "هما فين دول 🫤",
            # "هشتم": "علشان اركبك 😚",
            # "هشتمو": "يشك تولعو انا مالي 🥲",
            # "بص بف": "الجروب اتملي شواذ 😱",
            # "احم": "يساتر 😌",
            # "انا": "انت شخه 😛",
            # "انت": "ايوه عملك ايه برضو 🤨",
            # "هو": "هو اللي ملبسنا هو",
            # "جاي": "لا متجيش",
            # "تعالي": "خدوني معاكم طيب 🥺",
            # "رايح انام": "مع الف داهيه 😝",
            # "بخ": "اخاف انا كدا يعني 🥱",
            # "عو": "ختطني يسمك ايه 😛",
            # "انا جيت": "الراخمه وصلت 😕",
            # "ماشي": "مشش في ركبك 🤣",
            # "مشي": "لا ونبي ترجم 🤔",
            # "يراجل": "خده و تاجر",
            # "ياراجل": "خده و تاجر",
            # "يجدع": "في مرتجع",
            # "عم": "رزعك واحد طلعه بدم",
            # "يعم": "رزعك واحد طلعه بدم",
            # "امم": "متمامش"
        # },
        
        # # الردود على التحيات الإسلامية
        # "تحيات": {
            # "السلام عليكم ورحمه الله وبركاته": "وعليكم السلام ورحمه الله وبركاته"
        # },
        
        # # الردود على الإيموجيز
        # "ايموجي": {
            # "😂": "اضحك يبختك اعم🙂",
            # "😂😂": "اضحك يبختك اعم🙂",
            # "💔": "مالك امزتي مين مزعلك 🥺",
            # "💔💔": "مالك امزتي مين مزعلك 🥺",
            # "🙄": "عينك لتتحول 😜",
            # "🙄🙄": "عينك لتتحول 😜",
            # "🤣": "براحه هتموت 🤭",
            # "🤣🤣": "ضحكني معاك 😂",
            # "🙂": "الضحكه الصفره دي",
            # "🙂🙂": "الضحكه الصفره دي",
            # "🤔": "متفكرش كتير 😜",
            # "🤔🤔": "متفكرش كتير 😜",
            # "😍": "انشف اعمو",
            # "😍😍": "انشف اعمو",
            # "😘": "قدامي كدا عادي 😂",
            # "😘😘": "قدامي كدا عادي 😂",
            # "🤨": "نزل حاجبك يشبح 🥲",
            # "🤨🤨": "لا اظبط كدا يابا 🤭",
            # "🥲": "افهم ايه كدا يعني",
            # "🥲🥲": "يعني زعلان",
            # "🤭": "العب العب",
            # "🤭🤭": "مش عارف اوصف الخبس",
            # "😒": "لا ونبي اعدل وشك امك دا 😒🙄",
            # "😒😒": "لا ونبي اعدل وشك امك دا 😒🙄",
            # "💋": "ونا فين من كل دا 🥺💔",
            # "💋💋": "ونا فين من كل دا 🥺💔",
            # "😭": "مالك يا بطه 😥",
            # "😭😭": "مالك يا بطه 😥",
            # "🥺": "يخراشي عليكي لما بتتعلقي 😻🤍",
            # "🥺🥺": "يخراشي عليكي لما بتتعلقي 😻🤍",
            # "🌚": "ايه امزتي انتي 🙂❤️",
            # "🌚🌚": "ايه امزتي انتي 🙂❤️",
            # "😛": "دخل لسانك اكلب 🤣",
            # "😛😛": "دخل لسانك اكلب 🤣",
            # "😝": "الكلب اهو الكلب اهو 🐶",
            # "😝😝": "الكلب اهو الكلب اهو 🐶",
            # "🙈": "شبهك والله 😂",
            # "🙈🙈": "شبهك والله 😂",
            # "🙊": "دا انت دا صح 🤣🤣",
            # "🙊🙊": "دا انت دا صح 🤣🤣",
            # "🥰": "الحب الحب الشوق الشوق 😚",
            # "🥰🥰": "الحب الحب الشوق الشوق 😚",
            # "🖤": "مخصماك",
            # "🖤🖤": "مخصماك",
            # "🥱": "جروب ممل بقول كدا من بدري",
            # "🥱🥱": "جروب ممل بقول كدا من بدري",
            # "❤️": "يمحني اعصابي سابت منك",
            # "❤️❤️": "كمان الاتنين انا كدا احبك",
            # "😳": "مندهش ليه كدا",
            # "😳😳": "مالك متنح ليه",
            # "👍": "اوك يحب",
            # "👍👍": "تمم احب",
            # "😁": "غاسل سنانك ولا ايه",
            # "😁😁": "مالك مبين ضبك ليه",
            # "😌": "متتنكش انت معفن",
            # "😌😌": "يتك نيله في شكلك",
            # "😀": "مالك انت تعبان",
            # "😀😀": "يصفر الكلب"
        # }
    # }

    # text = message.text
    # response = None
    
    # for category in RESPONSES.values():
        # if text in category:
            # response = category[text]
            # break
            
    # if response:
        # keyboard = InlineKeyboardMarkup([[
            # InlineKeyboardButton(
                # message.from_user.first_name,
                # url=f"https://t.me/{message.from_user.username}"
            # )
        # ]])
        # await message.reply_text(
            # text=f"<b>{response}</b>",
            # disable_web_page_preview=True,
            # reply_markup=keyboard
        # )






redootof = []
@app.on_message(filters.command(["قفل الردود", "تعطيل الردود"], "") & filters.group, group=277288870000127181882)
async def redootlock(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7654641648:
      if message.chat.id in redootof:
        return await message.reply_text("الردود معطله من قبل</b>")
      redootof.append(message.chat.id)
      return await message.reply_text("تم تعطيل الردود بنجاح</b>")
   else:
      return await message.reply_text("هذا الامر يخص ❪ الادمن وفوق ❫ بس</b>")



@app.on_message(filters.command(["فتح الردود", "تفعيل الردود"], "") & filters.group, group=720288)
async def redootopen(client, message):
   get = await client.get_chat_member(message.chat.id, message.from_user.id)
   if get.status in [ChatMemberStatus.OWNER, ChatMemberStatus.ADMINISTRATOR] or message.from_user.id == OWNER_ID or message.from_user.id == 7654641648:
      if not message.chat.id in redootof:
        return await message.reply_text("الردود مفعله من قبل</b>\n")
      redootof.remove(message.chat.id)
      return await message.reply_text("تم تفعيل الردود بنجاح</b>")
   else:
      return await message.reply_text("</b>هذا الامر يخص ❪ الادمن وفوق ❫ بس</b>")


@app.on_message(filters.text & filters.group, group=57355566)
async def respond_to_messages(client, message):
    # تجنب الرد إذا كانت المجموعة في القائمة السوداء
    if message.chat.id in redootof:
        return

    # قاموس الردود المنظمة حسب الفئات
    RESPONSES = {
        # الردود على الكلمات العامية
        "عامية": {
            "حبيبي": "Oh dear2! 🌝😂",
            "تمام": "شمطك الاسطي همام 😹😹",
            "تمم": "شمطك الاسطي همام 😹😹",
            "Ok": "شمطك واحد بلوك",
            "ok": "شمطك واحد بلوك",
            "hi": "انجليزي دا يمرسي",
            "Hi": "لا ونبي ترجم عربي",
            "هاي": "انجليزي دا يمرسي",
            "بف": "حكاك",
            "تع بف": "عيب مش قدامنا",
            "تع": "لا مش هروح",
            "برايفت": "ايييه شغل شواذ دا",
            "اطلع كول": "هقفل الكول عليكم",
            "تعكول": "هقفل الكول عليكم",
            "اطلع الكول": "يشواذ",
            "سلام": "في ستين الف داهيه",
            "بت": "بت في عينك",
            "بنت": "بت لما تبتك وسخ",
            "سيفي": "لا ونبي الكلمو عربي",
            "cv": "يرحم خلتك",
            "بص": "لا مبوصش",
            "لا": "لا لما تلوقك",
            "ايوه": "لا فاهم",
            "اممم": "بتنعر ليه",
            "اكيد": "ممكن",
            "وسخ": "مافي اوسخ منك",
            "وات": "ازغط بط",
            "تمم": "يرحم خالك",
            "بقولك": "مسمعش صوتك",
            "قلبي": "يمحني يكبدي يانا",
            "قلبو": "مالو قلبو وقف",
            "حبك": "حبك برص 🤪",
            "رخم": "مفي ارخم منك هنا 🤭",
            "بارد": "والله عندك حق",
            "اه": "الشارع اللي وراه😂😂",
            "هلا": "سلم و تعالي😎😂",
            "بارده": "البت دب بضان فعلا",
            "برود": "مصنع وحياتك",
            "رخمه": "والله ما بتفهم دي رخمه 🥸",
            "نتعرف": "طب روح اغلسها الاول😹",
            "روحي": "طلعت روحك 💔",
            "نسوان": "هما فين دول 🫤",
            "هشتم": "علشان اركبك 😚",
            "هشتمو": "يشك تولعو انا مالي 🥲",
            "بص بف": "الجروب اتملي شواذ 😱",
            "احم": "يساتر 😌",
            "انا": "انت شخه 😛",
            "انت": "ايوه عملك ايه برضو 🤨",
            "هو": "هو اللي ملبسنا هو",
            "جاي": "لا متجيش",
            "تعالي": "خدوني معاكم طيب 🥺",
            "رايح انام": "مع الف داهيه 😝",
            "بخ": "اخاف انا كدا يعني 🥱",
            "عو": "ختطني يسمك ايه 😛",
            "انا جيت": "الراخمه وصلت 😕",
            "ماشي": "مشش في ركبك 🤣",
            "مشي": "لا ونبي ترجم 🤔",
            "يراجل": "خده و تاجر",
            "ياراجل": "خده و تاجر",
            "يجدع": "في مرتجع",
            "عم": "رزعك واحد طلعه بدم",
            "يعم": "رزعك واحد طلعه بدم",
            "امم": "متمامش"
        },
        
        # الردود على التحيات الإسلامية
        "تحيات": {
            "السلام عليكم ورحمه الله وبركاته": "وعليكم السلام ورحمه الله وبركاته"
        },
        
        # الردود على الإيموجيز
        "ايموجي": {
            "😂": "اضحك يبختك اعم🙂",
            "😂😂": "اضحك يبختك اعم🙂",
            "💔": "مالك امزتي مين مزعلك 🥺",
            "💔💔": "مالك امزتي مين مزعلك 🥺",
            "🙄": "عينك لتتحول 😜",
            "🙄🙄": "عينك لتتحول 😜",
            "🤣": "براحه هتموت 🤭",
            "🤣🤣": "ضحكني معاك 😂",
            "🙂": "الضحكه الصفره دي",
            "🙂🙂": "الضحكه الصفره دي",
            "🤔": "متفكرش كتير 😜",
            "🤔🤔": "متفكرش كتير 😜",
            "😍": "انشف اعمو",
            "😍😍": "انشف اعمو",
            "😘": "قدامي كدا عادي 😂",
            "😘😘": "قدامي كدا عادي 😂",
            "🤨": "نزل حاجبك يشبح 🥲",
            "🤨🤨": "لا اظبط كدا يابا 🤭",
            "🥲": "افهم ايه كدا يعني",
            "🥲🥲": "يعني زعلان",
            "🤭": "العب العب",
            "🤭🤭": "مش عارف اوصف الخبس",
            "😒": "لا ونبي اعدل وشك امك دا 😒🙄",
            "😒😒": "لا ونبي اعدل وشك امك دا 😒🙄",
            "💋": "ونا فين من كل دا 🥺💔",
            "💋💋": "ونا فين من كل دا 🥺💔",
            "😭": "مالك يا بطه 😥",
            "😭😭": "مالك يا بطه 😥",
            "🥺": "يخراشي عليكي لما بتتعلقي 😻🤍",
            "🥺🥺": "يخراشي عليكي لما بتتعلقي 😻🤍",
            "🌚": "ايه امزتي انتي 🙂❤️",
            "🌚🌚": "ايه امزتي انتي 🙂❤️",
            "😛": "دخل لسانك اكلب 🤣",
            "😛😛": "دخل لسانك اكلب 🤣",
            "😝": "الكلب اهو الكلب اهو 🐶",
            "😝😝": "الكلب اهو الكلب اهو 🐶",
            "🙈": "شبهك والله 😂",
            "🙈🙈": "شبهك والله 😂",
            "🙊": "دا انت دا صح 🤣🤣",
            "🙊🙊": "دا انت دا صح 🤣🤣",
            "🥰": "الحب الحب الشوق الشوق 😚",
            "🥰🥰": "الحب الحب الشوق الشوق 😚",
            "🖤": "مخصماك",
            "🖤🖤": "مخصماك",
            "🥱": "جروب ممل بقول كدا من بدري",
            "🥱🥱": "جروب ممل بقول كدا من بدري",
            "❤️": "يمحني اعصابي سابت منك",
            "❤️❤️": "كمان الاتنين انا كدا احبك",
            "😳": "مندهش ليه كدا",
            "😳😳": "مالك متنح ليه",
            "👍": "اوك يحب",
            "👍👍": "تمم احب",
            "😁": "غاسل سنانك ولا ايه",
            "😁😁": "مالك مبين ضبك ليه",
            "😌": "متتنكش انت معفن",
            "😌😌": "يتك نيله في شكلك",
            "😀": "مالك انت تعبان",
            "😀😀": "يصفر الكلب"
        }
    }

    # إنشاء لوحة المفاتيح
    keyboard = InlineKeyboardMarkup([
        [InlineKeyboardButton(
            message.from_user.first_name,
            url=f"https://t.me/{message.from_user.username}"
        )]
    ])
    text = message.text
    response = None
    
    for category in RESPONSES.values():
        if text in category:
            response = category[text]
            break
    if response:
        await message.reply_text(
            text=f"<b>{response}</b>",
            disable_web_page_preview=True,
            reply_markup=keyboard
        )



# ردود بالاستيكر ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
# ردود بالاستيكر ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓



@app.on_message(filters.text & filters.group, group=576)
async def respond_to_messages(client, message):
    if message.chat.id in redootof:
        return

    stickers = {
        "تو": "CAACAgQAAx0Ce1SAxwACASNmKbPmiWqsueF3dQ8fKOHRJgHxrQACDgoAApOnyVFSCF57vmKmFR4E",
        "تمام": "CAACAgQAAx0Ce1SAxwACASdmKbQHcLxaRs_OJ7xThqmR7og_BgACbggAAs8_uVK0wLHrxTM1Mx4E",
        "حبك": "CAACAgUAAx0CfdLykgACBEdmLuVtiq0-Ldmte-ga8olzHGLCvQACRAgAAgYbsVdUa_ONajdZ9B4E",
        "هقر": "CAACAgQAAx0CfdLykgACBEpmLuWt2v0AAWMEv5dZHh1nzO_Ed2sAAuwTAALLoTBRr4QJtmFMduseBA",
        "هكر": "CAACAgQAAx0CfdLykgACBEpmLuWt2v0AAWMEv5dZHh1nzO_Ed2sAAuwTAALLoTBRr4QJtmFMduseBA",
        "خد": "CAACAgQAAx0CfdLykgACBE1mLuXmeLudGh7Nc-zNktLkeerUHAAC_wcAAuNpuFK02-F7HQRqjR4E",
        "والله": "CAACAgQAAx0CfdLykgACBFBmLuY5a8gWT9I8lr6c8vsU44svtQACvQoAAix4yFIPtNsXxHp20x4E",
        "بجد": "CAACAgQAAx0CfdLykgACBFBmLuY5a8gWT9I8lr6c8vsU44svtQACvQoAAix4yFIPtNsXxHp20x4E",
        "انا بعرف": "CAACAgQAAx0CfdLykgACBFNmLuaIbxVtzDMZgLqdPr9sDlPp4wACCQwAArGfyVLBK9eLtxwWvR4E",
        "تقدر": "CAACAgQAAx0CfdLykgACBFNmLuaIbxVtzDMZgLqdPr9sDlPp4wACCQwAArGfyVLBK9eLtxwWvR4E",
        "عيل شاذ": "CAACAgQAAx0CfdLykgACBFZmLubM3FaGoLDdQ65-YPt2kDGh4gACUgcAAn0gyVEl1eaE_TQmwB4E",
        "شاذ": "CAACAgQAAx0CfdLykgACBFZmLubM3FaGoLDdQ65-YPt2kDGh4gACUgcAAn0gyVEl1eaE_TQmwB4E",
        "فاهم": "CAACAgQAAx0CfdLykgACBFlmLucI1kCYOAABNh849YSXmO88pMkAAt4KAAIKynFR8F4khjrJCmIeBA",
        "حبي": "CAACAgQAAx0CfdLykgACBFlmLucI1kCYOAABNh849YSXmO88pMkAAt4KAAIKynFR8F4khjrJCmIeBA",
        "فاهمه حاجه" : "CAACAgQAAx0CfdLykgACBFlmLucI1kCYOAABNh849YSXmO88pMkAAt4KAAIKynFR8F4khjrJCmIeBA",
        "هقتلك": "CAACAgQAAx0CfdLykgACBFxmLufHeZsRZFNZmpAW3Lfuoxf9tgACSwoAAjJfwVD771p6YXQK-h4E",
        "شخنا": "CAACAgQAAx0CfdLykgACBF9mLuhA6lZpuox2MM4-DU16PTcZ4QACWAoAAjYUeFELNI9UsiCyuR4E",
        "طلع البوت": "CAACAgQAAx0CfdLykgACBGJmLui99NAfaWU_tL-aGyPictu3-AACKgsAApPWcVGSnA_P3T6FOh4E",
        "شكرا": "CAACAgQAAx0CfdLykgACBGVmLujerv9tceOFEzW3QqtgO0KJMwACswsAAscaeVEJUfl5G0kNCx4E",
        "شكراً": "CAACAgQAAx0CfdLykgACBGVmLujerv9tceOFEzW3QqtgO0KJMwACswsAAscaeVEJUfl5G0kNCx4E",
        "هضربك": "CAACAgQAAx0CfdLykgACBGhmLuksnf2wxmR0BZk6AAGTxQ0X6RsAAn0GAAJGw8lRaX8pApI3-NgeBA",
        "سي في": "CAACAgQAAx0CfdLykgACBG5mLumEAZuFl_XHmZxim57vvH7T-wACOwsAAtlyCFNLFGya1P8Omh4E",
        "عملتها ازي": "CAACAgQAAx0CfdLykgACBHFmLunsjXoY8JcPZkvxUko2okYFmAACrgsAAmC-6VLHszp4Xrh3bh4E",
        "اعملها": "CAACAgQAAx0CfdLykgACBHFmLunsjXoY8JcPZkvxUko2okYFmAACrgsAAmC-6VLHszp4Xrh3bh4E",
        "اعمل زيها": "CAACAgQAAx0CfdLykgACBHFmLunsjXoY8JcPZkvxUko2okYFmAACrgsAAmC-6VLHszp4Xrh3bh4E",
        "اعملي واحده": "CAACAgQAAx0CfdLykgACBHFmLunsjXoY8JcPZkvxUko2okYFmAACrgsAAmC-6VLHszp4Xrh3bh4E",
        "انا جيت": "CAACAgIAAx0CfdLykgACBHRmLupPu41_pxRU2NTvo7w8AAGbE6IAAtoqAAJA9pBL8jhQLd2CdIIeBA",
        "نا جيت": "CAACAgIAAx0CfdLykgACBHRmLupPu41_pxRU2NTvo7w8AAGbE6IAAtoqAAJA9pBL8jhQLd2CdIIeBA",
        "زعلان": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "زعلانه": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "مين مزعلك": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "مخنوقه": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "مخنوق": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "جضان": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "قرفانه": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "قرفان": "CAACAgQAAx0CfdLykgACBHdmLuqur7vXs0QNQhZOMx1JjMHU0wACYxAAAnadkVBv1QtOG6zENh4E",
        "تخصني": "CAACAgQAAx0CfdLykgACBHxmLutWKXeoHAl6DWFKB6jNzpqqRgACWhEAAt3EkVBnEtOVD7eXnR4E",
        "يخصني": "CAACAgQAAx0CfdLykgACBHxmLutWKXeoHAl6DWFKB6jNzpqqRgACWhEAAt3EkVBnEtOVD7eXnR4E",
        "عاش": "CAACAgQAAx0CfdLykgACBH9mLuvKwVwh05MZ23RXpYC3evS8fgACig8AAr56oFD3xy35kqmx6B4E",
        "عاش عليك": "CAACAgQAAx0CfdLykgACBH9mLuvKwVwh05MZ23RXpYC3evS8fgACig8AAr56oFD3xy35kqmx6B4E",
        "اضرب": "CAACAgQAAx0CfdLykgACBIBmLuvRn5K0vBxgRtQIQ9TxETTZCQACGREAAuQDoFA9mbM8ilzniB4E",
        "اخرب": "CAACAgQAAx0CfdLykgACBIBmLuvRn5K0vBxgRtQIQ9TxETTZCQACGREAAuQDoFA9mbM8ilzniB4E",
        "ايه": "CAACAgQAAx0CfdLykgACBIFmLuvjPCDwkQABy5XegTKWhFlVmfoAAtoMAAIcvslT3ab-fXaxZMweBA",
        "اي دا": "CAACAgQAAx0CfdLykgACBIFmLuvjPCDwkQABy5XegTKWhFlVmfoAAtoMAAIcvslT3ab-fXaxZMweBA",
        "ايه دا": "CAACAgQAAx0CfdLykgACBIFmLuvjPCDwkQABy5XegTKWhFlVmfoAAtoMAAIcvslT3ab-fXaxZMweBA",
        "انا محظور": "CAACAgQAAxkBAAKtcGYw7Y73mSMYChBRgQ4On_sxY6KsAAIJCAACRLsZU7MZ6-wtFFAnHgQ",
        "محظوره": "CAACAgQAAxkBAAKtdWYw7eufIiz30pGHmRz-Xomh7FTeAAKwCwACVZmwU7P9gzUgYNtEHgQ",
        "محظورة": "CAACAgQAAxkBAAKteGYw7lKynUk7S9_9Z0ByLo7VlFuWAAJOEwACXPOoUymY-rmYTwy1HgQ",
        "انا محظوره": "CAACAgQAAxkBAAKte2Yw7odoGrylmAZt_mlgpW1Xdw0uAALTDAADVehQlLm3KaawSnseBA",
        "محظور": "CAACAgIAAxkBAAKtfmYw7s9jfNfoGhAmZeyhL9mdDfn5AAKCPAACK6C5S5vlggUiPzuJHgQ",
    }
    text = message.text 

    if text in stickers:
        stickers = stickers[text]
        await message.reply_sticker(
            stickers,

        )




    
    
#تنبيه بالاضافه البوت  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
#تنبيه بالاضافه البوت  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓






@app.on_message(filters.new_chat_members)
async def join_watcher(_, message: Message):
    chat = message.chat
    try:
        invite_link = await app.export_chat_invite_link(chat.id)
    except:
        invite_link = "رابط الدعوة غير متاح."

    for member in message.new_chat_members:
        if member.id == (await app.get_me()).id:
            member_count = await app.get_chat_members_count(chat.id)
            caption = (
                f"📝 **تمت إضافة بوت الموسيقى إلى مجموعة جديدة**\n\n"
                f"❅─────✧❅✦❅✧─────❅\n\n"
                f"•  **اسم الدردشة:** `{chat.title}`\n"
                f"•  **معرف الدردشة:** `{chat.id}`\n"
                f"•  **اسم مستخدم الدردشة:** @{chat.username if chat.username else 'خاص'}\n"
                f"•  **رابط الدردشة:** [انقر هنا]({invite_link})\n"
                f"•  **عدد أعضاء المجموعة:** `{member_count}`\n"
                f"•  **تمت الإضافة بواسطة:** {message.from_user.mention}"
            )

            await app.send_photo(
                chat_id=LOGGER_ID,
                photo="https://files.catbox.moe/qgca6n.jpg",
                caption=caption,
                reply_markup=InlineKeyboardMarkup(
                    [[InlineKeyboardButton("رؤية المجموعة 👀", url=invite_link if isinstance(invite_link, str) else "https://t.me/")]]
                ),
            )


@app.on_message(filters.left_chat_member)
async def on_left_chat_member(_, message: Message):
    me = await app.get_me()
    if message.left_chat_member.id != me.id:
        return

    remover = message.from_user.mention if message.from_user else "**مستخدم مجهول**"
    chat = message.chat

    text = (
        f"✫ **<u>#مغادرة_المجموعة</u>** ✫\n\n"
        f"•  **اسم الدردشة:** `{chat.title}`\n"
        f"•  **معرف الدردشة:** `{chat.id}`\n"
        f"•  **تمت الإزالة بواسطة:** {remover}\n"
        f"•  **البوت:** @{me.username}"
    )

    await app.send_message(LOGGER_ID, text)